{"pageProps":{"post":{"id":"20220608","content":"\n## Github blog 제작을 위해 Github Action 사용해보기\n### repository 생성\n- `[user id].github.io` 이름으로 repository 생성\n### deploy key 생성 및 등록\n1. `ssh-keygen -t rsa -f ./[key file name] -C https://github.com/[user id]/[repository name]`\n2. file_name.pub 파일의 전체 내용을 복사하여\n    - Settings > Deploy keys > [Add deploy key] > Key 에 붙여넣기\n    - Title은 `Public key of ACTIONS_DEPLOY_KEY` 로 작성\n3. Settings > Environments > New environment > `github-pages` 생성 후 해당 환경 클릭\n    - 이후 Environment secrets에서 `[+] Add Secret` 클릭\n4. file_name 파일의 전체 내용을 복사하여\n    - 3의 Value 에 붙여넣기\n    - 3의 Name은 `ACTIONS_DEPLOY_KEY` 로 작성\n### github action 실행파일 작성\n- deploy.yml 파일 작성하여 .github/workflows 하위에 저장\n```yml\nname: GitHub Pages\n\non:\n  push:\n    branches:\n      - main\n  workflow_dispatch:\n\njobs:\n  deploy:\n    runs-on: ubuntu-20.04\n    concurrency:\n      group: ${{ github.workflow }}-${{ github.ref }}\n    steps:\n      - uses: actions/checkout@v3\n\n      - name: Setup Node\n        uses: actions/setup-node@v3\n        with:\n          node-version: '14' #local에서 사용한 버전과 동일하게 작성\n\n      - name: Get yarn cache\n        id: yarn-cache\n        run: echo \"::set-output name=dir::$(yarn cache dir)\"\n\n      - name: Cache dependencies\n        uses: actions/cache@v2\n        with:\n          path: ${{ steps.yarn-cache.outputs.dir }}\n          key: ${{ runner.os }}-yarn-${{ hashFiles('**/yarn.lock') }}\n          restore-keys: |\n            ${{ runner.os }}-yarn-\n      - run: yarn install --frozen-lockfile\n      - run: yarn stack\n      - run: yarn build\n      - run: yarn export # out에 있는 파일 내용이 export됨\n\n      - name: Deploy\n        uses: peaceiris/actions-gh-pages@v3\n        if: ${{ github.ref == 'refs/heads/main' }}\n        with:\n          github_token: ${{ secrets.GITHUB_TOKEN }}\n          publish_dir: ./out\n```\n\n🎈 기타 내용은 추후 다른 포스트에서 설명.  \n이 포스트에서는 git action에 대해서만 정리\n\n### git push 후 확인\n","title":"Github Action","date":"2022-06-08","category":["tool","git"],"tag":["git-action","git"]},"prev":null,"next":null},"__N_SSG":true}